---
import content from "../data/content.json";
const { navigation, businessInfo } = content;
const navItems = navigation.items;
---

<nav
  class="sticky top-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b border-border shadow-sm"
>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center py-4">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-2">
        <div class="text-2xl font-serif font-bold text-primary">
          {businessInfo.name}
        </div>
        <span
          class="text-xs tracking-widest text-muted-foreground hidden sm:inline"
          >{businessInfo.tagline}</span
        >
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center gap-8">
        {
          navItems.map((item) => (
            <a
              href={item.href}
              class="text-sm font-medium text-foreground/70 hover:text-foreground transition-colors"
            >
              {item.label}
            </a>
          ))
        }
      </div>

      <!-- CTA Buttons -->
      <div class="hidden md:flex items-center gap-3">
        <a
          href={`tel:${businessInfo.phoneRaw}`}
          class="flex items-center gap-2 px-4 py-2 text-sm font-medium text-primary hover:text-primary/80 transition-colors"
        >
          <!-- Phone Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            ><path
              d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
            ></path></svg
          >
          <span>Call Now</span>
        </a>
        <button
          class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"
        >
          Get Quote
        </button>
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-btn"
        class="md:hidden p-2"
        aria-label="Toggle menu"
      >
        <!-- Menu Icon -->
        <svg
          id="menu-icon"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          ><line x1="4" x2="20" y1="12" y2="12"></line><line
            x1="4"
            x2="20"
            y1="6"
            y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg
        >
        <!-- X Icon (Hidden initially) -->
        <svg
          id="close-icon"
          class="hidden"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          ><path d="M18 6 6 18"></path><path d="m6 6 18 18"></path></svg
        >
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div
      id="mobile-menu"
      class="hidden md:hidden pb-4 space-y-3 animate-in fade-in slide-in-from-top-2"
    >
      {
        navItems.map((item) => (
          <a
            href={item.href}
            class="mobile-nav-link block text-sm font-medium text-foreground/70 hover:text-foreground transition-colors py-2"
          >
            {item.label}
          </a>
        ))
      }
      <div class="pt-3 space-y-2 border-t border-border">
        <a
          href="tel:+13476178182"
          class="block text-sm font-medium text-primary hover:text-primary/80"
        >
          ðŸ“ž (347) 617-8182
        </a>
        <button
          class="w-full inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"
        >
          Get Quote
        </button>
      </div>
    </div>
  </div>
</nav>

<script>
  // LÃ³gica para el menÃº mÃ³vil
  const menuBtn = document.getElementById("mobile-menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");
  const menuIcon = document.getElementById("menu-icon");
  const closeIcon = document.getElementById("close-icon");
  const mobileLinks = document.querySelectorAll(".mobile-nav-link");

  function toggleMenu() {
    const isHidden = mobileMenu?.classList.contains("hidden");

    if (isHidden) {
      mobileMenu?.classList.remove("hidden");
      menuIcon?.classList.add("hidden");
      closeIcon?.classList.remove("hidden");
    } else {
      mobileMenu?.classList.add("hidden");
      menuIcon?.classList.remove("hidden");
      closeIcon?.classList.add("hidden");
    }
  }

  menuBtn?.addEventListener("click", toggleMenu);

  // Cerrar menÃº al hacer clic en un enlace
  mobileLinks.forEach((link) => {
    link.addEventListener("click", () => {
      if (!mobileMenu?.classList.contains("hidden")) {
        toggleMenu();
      }
    });
  });
</script>
