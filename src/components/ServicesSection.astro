---
import content from "../data/content.json";
const { services: servicesData } = content;

type IconKey = "home" | "building" | "sparkles" | "package" | "store" | "wind";

interface Service {
  slug: string;
  icon: IconKey;
  title: string;
  image?: string;
}

const services: Service[] = servicesData.list as Service[];

const icons: Record<IconKey, string> = {
  home: '<path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>',
  building:
    '<rect width="16" height="20" x="4" y="2" rx="2" ry="2"/><path d="M9 22v-4h6v4"/><path d="M8 6h.01"/><path d="M16 6h.01"/><path d="M12 6h.01"/><path d="M12 10h.01"/><path d="M12 14h.01"/><path d="M16 10h.01"/><path d="M16 14h.01"/><path d="M8 10h.01"/><path d="M8 14h.01"/>',
  sparkles:
    '<path d="M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"/><path d="M20 3v4"/><path d="M22 5h-4"/><path d="M4 17v2"/><path d="M5 18H3"/>',
  package:
    '<path d="m7.5 4.27 9 5.15"/><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/>',
  store:
    '<path d="m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"/><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><path d="M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"/><path d="M2 7h20"/><path d="M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7"/>',
  wind: '<path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"/><path d="M9.6 4.6A2 2 0 1 1 11 8H2"/><path d="M12.6 19.4A2 2 0 1 0 14 16H2"/>',
};
---

<section id="services" class="section-watermark py-16 px-4 bg-background">
  <div class="max-w-6xl mx-auto">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      {
        services.slice(0, 4).map((service) => (
          <a
            href={`/service/${service.slug}`}
            class="service-card group relative h-96 overflow-hidden rounded-lg shadow-lg transition-transform duration-300 hover:scale-105"
          >
            {/* Background Image */}
            <img
              src={service.image || "/img/images/foto-principal.webp"}
              alt={service.title}
              class="absolute inset-0 h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"
              loading="lazy"
              decoding="async"
            />

            {/* Dark Overlay */}
            <div class="absolute inset-0 bg-black/40 transition-opacity duration-300 group-hover:bg-black/50" />

            {/* Content */}
            <div class="relative h-full flex flex-col items-center justify-center gap-4 p-6 text-center">
              {/* Icon */}
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="48"
                height="48"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-accent drop-shadow-lg transition-transform duration-300 group-hover:scale-110"
                set:html={icons[service.icon]}
              />

              {/* Title */}
              <h3 class="text-white text-lg font-bold leading-tight drop-shadow-lg uppercase">
                {service.title}
              </h3>
            </div>

            {/* Hover Effect - Subtle shine */}
            <div class="absolute inset-0 bg-gradient-to-t from-accent/0 via-transparent to-accent/0 opacity-0 transition-opacity duration-300 group-hover:opacity-20" />
          </a>
        ))
      }
    </div>
  </div>
</section>

<style>
  .service-card {
    animation: fade-in-up 0.6s ease-out forwards;
    opacity: 0;
  }

  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
